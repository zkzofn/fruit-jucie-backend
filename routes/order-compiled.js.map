{"version":3,"sources":["order.js"],"names":[],"mappings":";;AAAA;;;;AACA;;AACA;;;;AAEA,IAAM,SAAS,kBAAQ,MAAR,EAAf;;AAEA,OAAO,GAAP,CAAW,GAAX,EAAgB,UAAC,GAAD,EAAM,GAAN,EAAW,IAAX,EAAoB;AAClC,mBAAK,aAAL,CAAmB,UAAC,GAAD,EAAM,UAAN,EAAqB;AACtC,YAAI,GAAJ,EAAS,MAAM,GAAN;;AAET,YAAM,UAAN;;AAEA,4CAAe,UAAf,EAA2B,KAA3B,EACG,IADH,CACQ,mBAAW;AACf,gBAAI,IAAJ,CAAS,EAAC,gBAAD,EAAT;;AAEA,uBAAW,OAAX;AACD,SALH;AAMD,KAXD;AAYD,CAbD,EAaG,IAbH,CAaQ,GAbR,EAaa,UAAC,GAAD,EAAM,GAAN,EAAc;AACzB,mBAAK,aAAL,CAAmB,UAAC,GAAD,EAAM,UAAN,EAAqB;AACtC,YAAI,GAAJ,EAAS,MAAM,GAAN;;AAET,YAAM,OAAO,IAAI,IAAjB;AACA,YAAM,OAAO,OAAO,IAAP,CAAY,IAAZ,CAAb;;AAEA,YAAI,YAAY,EAAhB;AACA,YAAI,cAAc,EAAlB;;AAEA,aAAK,OAAL,CAAa,UAAC,GAAD,EAAS;AACpB,yBAAa,MAAM,IAAnB;;AAEA,gBAAI,QAAQ,SAAR,IAAqB,QAAQ,QAA7B,IAAyC,QAAQ,aAArD,EACE,eAAkB,KAAK,GAAL,CAAlB,QADF,KAGE,qBAAmB,KAAK,GAAL,CAAnB;AACH,SAPD;;AASA,qBAAa,MAAb;AACA,uBAAe,OAAf;;AAGA;AACA;;AAEA,YAAM,iDAEO,SAFP,0BAGO,WAHP,MAAN;;AAKA,gBAAQ,GAAR,CAAY,KAAZ;;AAEA,4CAAe,UAAf,EAA2B,KAA3B,EACG,IADH,CACQ,UAAC,OAAD,EAAa;AACjB,gBAAI,IAAJ,CAAS,OAAT;AACA,uBAAW,OAAX;AACD,SAJH;AAKD,KArCD;AAsCD,CApDD;;AAsDA,OAAO,OAAP,GAAiB,MAAjB","file":"order-compiled.js","sourcesContent":["import express from 'express';\r\nimport { pool } from './DBconfig';\r\nimport { queryConductor } from './queryConductor';\r\n\r\nconst router = express.Router();\r\n\r\nrouter.get(\"/\", (req, res, next) => {\r\n  pool.getConnection((err, connection) => {\r\n    if (err) throw err;\r\n\r\n    const query = ``;\r\n\r\n    queryConductor(connection, query)\r\n      .then(results => {\r\n        res.json({results});\r\n\r\n        connection.release();\r\n      })\r\n  })\r\n}).post(\"/\", (req, res) => {\r\n  pool.getConnection((err, connection) => {\r\n    if (err) throw err;\r\n\r\n    const data = req.body;\r\n    const keys = Object.keys(data);\r\n\r\n    let keyString = \"\";\r\n    let valueString = \"\";\r\n\r\n    keys.forEach((key) => {\r\n      keyString += key + \", \";\r\n\r\n      if (key === \"user_id\" || key === \"status\" || key === \"total_price\")\r\n        valueString += `${data[key]}, `;\r\n      else\r\n        valueString += `\"${data[key]}\", `;\r\n    });\r\n\r\n    keyString += \"date\";\r\n    valueString += \"now()\";\r\n\r\n\r\n    // cart_detail 의 status 바꿔줘야해\r\n    // order_detail에 cart_detail에 있는 내용들 넣어줘야해\r\n\r\n    const query =\r\n      `INSERT INTO \\`order\\`\r\n              (${keyString})\r\n       VALUES (${valueString})`;\r\n\r\n    console.log(query);\r\n\r\n    queryConductor(connection, query)\r\n      .then((results) => {\r\n        res.json(results);\r\n        connection.release();\r\n      });\r\n  })\r\n});\r\n\r\nmodule.exports = router;"]}