{"version":3,"sources":["user.js"],"names":[],"mappings":";;AAAA;;;;AACA;;;;AAEA,IAAM,SAAS,kBAAQ,MAAR,EAAf;;AAEA,OAAO,GAAP,CAAW,GAAX,EAAgB,UAAC,GAAD,EAAM,GAAN,EAAW,IAAX,EAAoB;AAClC,iBAAK,aAAL,CAAmB,UAAC,GAAD,EAAM,UAAN,EAAqB;AACtC,QAAI,GAAJ,EAAS,MAAM,GAAN;;AAET,QAAM,WAAW,SAAX,QAAW,CAAC,KAAD,EAAW;AAC1B,aAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC,mBAAW,KAAX,CAAiB,KAAjB,EAAwB,UAAC,KAAD,EAAQ,OAAR,EAAoB;AAC1C,cAAI,KAAJ,EAAW,OAAO,KAAP;;AAEX,kBAAQ,OAAR;AACD,SAJD;AAKD,OANM,CAAP;AAOD,KARD;;AAUA,QAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AAC/B,UAAM,oEAGW,IAAI,KAAJ,CAAU,MAH3B;;AAKA,aAAO,SAAS,KAAT,EACJ,IADI,CACC,mBAAW;AACf,YAAM,OAAO,QAAQ,CAAR,CAAb;AACA,gBAAQ,IAAR;AACD,OAJI,CAAP;AAKD,KAXD,EAWG,IAXH,CAWQ,UAAC,IAAD,EAAU;AAChB;;AAEA,UAAI,IAAJ,CAAS,EAAC,UAAD,EAAT;AACA,iBAAW,OAAX;AACD,KAhBD;AAiBD,GA9BD;AA+BD,CAhCD;;AAkCA,OAAO,OAAP,GAAiB,MAAjB","file":"user-compiled.js","sourcesContent":["import express from 'express';\r\nimport { pool } from './DBconfig';\r\n\r\nconst router = express.Router();\r\n\r\nrouter.get(\"/\", (req, res, next) => {\r\n  pool.getConnection((err, connection) => {\r\n    if (err) throw err;\r\n\r\n    const getQuery = (query) => {\r\n      return new Promise((resolve, reject) => {\r\n        connection.query(query, (error, results) => {\r\n          if (error) reject(error);\r\n\r\n          resolve(results);\r\n        })\r\n      })\r\n    };\r\n\r\n    new Promise((resolve, reject) => {\r\n      const query =\r\n        `SELECT * \r\n           FROM user \r\n          WHERE id = ${req.query.userId}`;\r\n\r\n      return getQuery(query)\r\n        .then(results => {\r\n          const user = results[0];\r\n          resolve(user);\r\n        });\r\n    }).then((user) => {\r\n      // 사용자정보에서 민감정보는 뺴야한다.\r\n\r\n      res.json({user});\r\n      connection.release();\r\n    })\r\n  })\r\n});\r\n\r\nmodule.exports = router;"]}