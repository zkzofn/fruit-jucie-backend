{"version":3,"sources":["product.js"],"names":[],"mappings":";;AAAA;;;;AACA;;;;AAEA,IAAM,SAAS,kBAAQ,MAAR,EAAf;;AAEA,OAAO,GAAP,CAAW,GAAX,EAAgB,UAAC,GAAD,EAAM,GAAN,EAAW,IAAX,EAAoB;AAClC,iBAAK,aAAL,CAAmB,UAAC,GAAD,EAAM,UAAN,EAAqB;AACtC,QAAI,GAAJ,EAAS,MAAM,GAAN;;AAET,QAAM,WAAW,SAAX,QAAW,CAAC,KAAD,EAAW;AAC1B,aAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC,mBAAW,KAAX,CAAiB,KAAjB,EAAwB,UAAC,KAAD,EAAQ,OAAR,EAAoB;AAC1C,cAAI,KAAJ,EAAW,OAAO,KAAP;;AAEX,kBAAQ,OAAR;AACD,SAJD;AAKD,OANM,CAAP;AAOD,KARD;;AAaA,QAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AAC/B,UAAM,2EAGa,IAAI,KAAJ,CAAU,SAH7B;;AAKA,eAAS,KAAT,EACG,IADH,CACQ,mBAAW;AACf,YAAM,UAAU,QAAQ,CAAR,CAAhB;;AAEA,gBAAQ,OAAR;AACD,OALH;AAMD,KAZD,EAYG,IAZH,CAYQ,UAAC,OAAD,EAAa;AACnB,UAAM,oFAGmB,IAAI,KAAJ,CAAU,SAHnC;;AAKA,aAAO,SAAS,KAAT,EACJ,IADI,CACC,mBAAW;AACf,gBAAQ,SAAR,IAAqB,OAArB;;AAEA,eAAO,OAAP;AACD,OALI,CAAP;AAMD,KAxBD,EAwBG,IAxBH,CAwBQ,UAAC,OAAD,EAAa;AACnB,UAAM,qFAGmB,IAAI,KAAJ,CAAU,SAHnC;;AAKA,aAAO,SAAS,KAAT,EACJ,IADI,CACC,mBAAW;AACf,gBAAQ,SAAR,IAAqB,OAArB;;AAEA,eAAO,OAAP;AACD,OALI,CAAP;AAMD,KApCD,EAoCG,IApCH,CAoCQ,UAAC,OAAD,EAAa;AACnB;AACA,UAAM,6EAGmB,IAAI,KAAJ,CAAU,SAHnC;;AAKA,aAAO,SAAS,KAAT,EACJ,IADI,CACC,mBAAW;AACf,gBAAQ,SAAR,IAAqB,OAArB;;AAEA,eAAO,OAAP;AACD,OALI,CAAP;AAMD,KAjDD,EAiDG,IAjDH,CAiDQ,UAAC,OAAD,EAAa;AACnB;AACA,UAAM,iFAGmB,IAAI,KAAJ,CAAU,SAHnC;;AAKA,eAAS,KAAT,EACG,IADH,CACQ,mBAAW;AACf,gBAAQ,aAAR,IAAyB,OAAzB;;AAEA,YAAI,IAAJ,CAAS,EAAC,gBAAD,EAAT;AACA,mBAAW,OAAX;AACD,OANH;AAOD,KA/DD;AAgED,GAhFD;AAiFD,CAlFD;;AAoFA,OAAO,OAAP,GAAiB,MAAjB","file":"product-compiled.js","sourcesContent":["import express from 'express';\r\nimport { pool } from './DBconfig';\r\n\r\nconst router = express.Router();\r\n\r\nrouter.get(\"/\", (req, res, next) => {\r\n  pool.getConnection((err, connection) => {\r\n    if (err) throw err;\r\n\r\n    const getQuery = (query) => {\r\n      return new Promise((resolve, reject) => {\r\n        connection.query(query, (error, results) => {\r\n          if (error) reject(error);\r\n\r\n          resolve(results);\r\n        })\r\n      })\r\n    };\r\n\r\n\r\n\r\n\r\n    new Promise((resolve, reject) => {\r\n      const query =\r\n        `SELECT * \r\n             FROM product \r\n            WHERE id = ${req.query.productId}`;\r\n\r\n      getQuery(query)\r\n        .then(results => {\r\n          const product = results[0];\r\n\r\n          resolve(product);\r\n        });\r\n    }).then((product) => {\r\n      const query =\r\n        `SELECT *\r\n           FROM product_option\r\n          WHERE product_id = ${req.query.productId}`;\r\n\r\n      return getQuery(query)\r\n        .then(results => {\r\n          product[\"options\"] = results;\r\n\r\n          return product;\r\n        });\r\n    }).then((product) => {\r\n      const query =\r\n        `SELECT * \r\n           FROM product_detail\r\n          WHERE product_id = ${req.query.productId}`;\r\n\r\n      return getQuery(query)\r\n        .then(results => {\r\n          product[\"details\"] = results;\r\n\r\n          return product;\r\n        })\r\n    }).then((product) => {\r\n      // 이거 페이지 기능 넣어서 쿼리 수정해야해\r\n      const query =\r\n        `SELECT *\r\n           FROM inquiry\r\n          WHERE product_id = ${req.query.productId}`;\r\n\r\n      return getQuery(query)\r\n        .then(results => {\r\n          product[\"inquiry\"] = results;\r\n\r\n          return product;\r\n        })\r\n    }).then((product) => {\r\n      // 이거 페이지 기능 넣어서 쿼리 수정해야해\r\n      const query = \r\n        `SELECT *\r\n           FROM post_script\r\n          WHERE product_id = ${req.query.productId}`;\r\n\r\n      getQuery(query)\r\n        .then(results => {\r\n          product[\"post_script\"] = results;\r\n\r\n          res.json({product});\r\n          connection.release();\r\n        })\r\n    });\r\n  })\r\n});\r\n\r\nmodule.exports = router;"]}